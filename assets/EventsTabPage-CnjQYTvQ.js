import{d as L,r as _,v as R,c as u,w as t,a as e,o as r,b as a,I as v,e as m,f as d,g as c,h as T,x as b,y as C,z as H,H as M,J as B,K as N,i as q,j as z,k as F,L as P,n as V,q as j,A,F as x,t as i}from"./index-DinOcIm6.js";import{a as D}from"./api--0dBxGPB.js";const $=L({__name:"EventsTabPage",setup(G){const f=_(),l=_();R(async()=>{console.log("onMounted"),l.value||await p()});const p=async()=>(console.log("updateEvents"),D("events",void 0,!1,f,void 0,void 0,void 0,o=>{const s=o.split(`
`).reduce((n,g)=>{const I=g.match(/^(\d{4}-\d{2}-\d{2}) (\d{2}:\d{2}:\d{2}):(.*?):(.*?)$/);if(I){const[J,y,w,k,E]=I;n.push({date:y,time:w,source:k,details:E})}else n.length>0&&(n[n.length-1].details+="<br/>"+g);return n},[]);l.value=s.reverse()})),h=async o=>(console.log("handleRefresh"),p().then(()=>{o.target&&o.target.complete()}));return(o,s)=>(r(),u(e(j),null,{default:t(()=>[a(e(c),null,{default:t(()=>[a(e(v),null,{default:t(()=>[a(e(m),null,{default:t(()=>s[1]||(s[1]=[d("Events")])),_:1})]),_:1})]),_:1}),a(e(V),{padding:"",fullscreen:!0},{default:t(()=>[a(e(c),{collapse:"condense"},{default:t(()=>[a(e(v),null,{default:t(()=>[a(e(m),{size:"large"},{default:t(()=>s[2]||(s[2]=[d("Events")])),_:1})]),_:1})]),_:1}),a(e(T),{ref_key:"loading",ref:f},null,512),a(e(b),{slot:"fixed",onIonRefresh:s[0]||(s[0]=n=>h(n))},{default:t(()=>[a(e(C))]),_:1}),l.value&&l.value.length>0?(r(),u(e(H),{key:0},{default:t(()=>[(r(!0),M(N,null,B(l.value,n=>(r(),u(e(A),null,{default:t(()=>[a(e(x),{class:"ion-text-nowrap",style:{flex:"0 0 auto","margin-right":"10px","white-space":"nowrap"}},{default:t(()=>[d(i(n.date)+" "+i(n.time)+" "+i(n.source),1)]),_:2},1024),a(e(x),{class:"ion-text-wrap",style:{flex:"1 1 auto"},innerHTML:n.details},null,8,["innerHTML"])]),_:2},1024))),256))]),_:1})):(r(),u(e(q),{key:1},{default:t(()=>[a(e(z),{"text-center":""},{default:t(()=>[a(e(F),null,{default:t(()=>[a(e(P),null,{default:t(()=>s[3]||(s[3]=[d("No events available.")])),_:1})]),_:1})]),_:1})]),_:1}))]),_:1})]),_:1}))}});export{$ as default};
